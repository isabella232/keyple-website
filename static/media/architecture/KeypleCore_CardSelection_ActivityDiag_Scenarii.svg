<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="472" height="1023" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:472px;height:1023px" preserveAspectRatio="none" version="1.1" viewBox="0 0 472 1023" zoomAndPan="magnify"><g><ellipse cx="207" cy="20" fill="#000" rx="10" ry="10" style="stroke:none;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="208" height="194.891" x="103" y="40" fill="#FFF"/><path fill="none" d="M236,41 L236,50.6094 L226,60.6094 L103,60.6094" style="stroke:#000;stroke-width:2"/><text x="106" y="55.533" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123">Reader initialization</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="99" height="35.094" x="157.5" y="77.609" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="167.5" y="100.066" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79">register plugin</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="76" height="35.094" x="169" y="132.703" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="179" y="155.16" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56">get reader</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="188" height="35.094" x="113" y="187.797" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="123" y="210.254" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168">prepare card selection request</text><polygon fill="#FEFECE" points="162.5 254.891 251.5 254.891 263.5 266.891 251.5 278.891 162.5 278.891 150.5 266.891 162.5 254.891" style="stroke:#a80036;stroke-width:1.5"/><text x="162.5" y="271.392" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89">transaction mode?</text><text x="71.5" y="264.474" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79">explicit selection</text><text x="263.5" y="264.474" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79">default selection</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="122" height="35.094" x="28" y="288.891" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="38" y="311.348" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102">test card presence</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="158" height="35.094" x="10" y="358.984" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="20" y="381.441" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138">process explicit selection</text><rect style="stroke:#000;stroke-width:2" width="249" height="209.891" x="200.5" y="288.891" fill="#FFF"/><path fill="none" d="M439.5,289.8906 L439.5,299.5 L429.5,309.5 L200.5,309.5" style="stroke:#000;stroke-width:2"/><text x="203.5" y="304.424" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="229">Observer: observable reader setting</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="189" height="35.094" x="230.5" y="326.5" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="240.5" y="348.957" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="169">default selection reader setting</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="189" height="35.094" x="230.5" y="396.594" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="240.5" y="419.051" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="169">reader notification subscribtion</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="130" height="35.094" x="260" y="451.688" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="270" y="474.144" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110">&quot;wait card detection&quot;</text><rect style="stroke:#000;stroke-width:1" width="224" height="6" x="213" y="508.781" fill="#000" rx="2.5" ry="2.5"/><rect style="stroke:#d4ac0d;stroke-width:1.5" width="143" height="35.094" x="253.5" y="534.781" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="263.5" y="557.238" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123">polling card presence)</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="95" height="35.094" x="277.5" y="579.875" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="287.5" y="602.332" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75">card insertion</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="158" height="35.094" x="246" y="634.969" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="256" y="657.426" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138">process default selection</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="196" height="35.094" x="227" y="690.063" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="237" y="712.519" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176">notifies card inserted &amp; selected</text><rect style="stroke:#000;stroke-width:1" width="224" height="6" x="213" y="735.156" fill="#000" rx="2.5" ry="2.5"/><rect style="stroke:#000;stroke-width:2" width="273.5" height="84.703" x="188" y="751.732" fill="#FFF"/><path fill="none" d="M452,752.7324 L452,762.3418 L442,772.3418 L188,772.3418" style="stroke:#000;stroke-width:2"/><text x="191" y="767.266" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="254">Observer: reader notification processing</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="174" height="35.094" x="238" y="789.342" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="248" y="811.799" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154">process selection response</text><polygon fill="#FEFECE" points="207 842.436 219 854.436 207 866.436 195 854.436 207 842.436" style="stroke:#a80036;stroke-width:1.5"/><rect style="stroke:#d4ac0d;stroke-width:1.5" width="114" height="35.094" x="150" y="886.436" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="160" y="908.893" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94">get selected card</text><rect style="stroke:#d4ac0d;stroke-width:1.5" width="210" height="35.094" x="102" y="977.618" fill="#FEFECE" rx="12.5" ry="12.5"/><text x="112" y="1000.075" fill="#000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="190">send APDU commands to the card</text><line style="stroke:#a80036;stroke-width:1.5" x1="207" x2="207" y1="112.703" y2="132.703"/><polygon fill="#A80036" points="203 122.703 207 132.703 211 122.703 207 126.703" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="207" x2="207" y1="167.797" y2="187.797"/><polygon fill="#A80036" points="203 177.797 207 187.797 211 177.797 207 181.797" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="207" x2="207" y1="30" y2="77.609"/><polygon fill="#A80036" points="203 67.609 207 77.609 211 67.609 207 71.609" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="89" x2="89" y1="323.984" y2="358.984"/><polygon fill="#A80036" points="85 348.984 89 358.984 93 348.984 89 352.984" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="361.594" y2="396.594"/><polygon fill="#A80036" points="321 386.594 325 396.594 329 386.594 325 390.594" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="431.688" y2="451.688"/><polygon fill="#A80036" points="321 441.688 325 451.688 329 441.688 325 445.688" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="614.969" y2="634.969"/><polygon fill="#A80036" points="321 624.969 325 634.969 329 624.969 325 628.969" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="670.063" y2="690.063"/><polygon fill="#A80036" points="321 680.063 325 690.063 329 680.063 325 684.063" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="514.781" y2="534.781"/><polygon fill="#A80036" points="321 524.781 325 534.781 329 524.781 325 528.781" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="741.156" y2="789.342"/><polygon fill="#A80036" points="321 779.342 325 789.342 329 779.342 325 783.342" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="150.5" x2="89" y1="266.891" y2="266.891"/><line style="stroke:#a80036;stroke-width:1.5" x1="89" x2="89" y1="266.891" y2="288.891"/><polygon fill="#A80036" points="85 278.891 89 288.891 93 278.891 89 282.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="263.5" x2="325" y1="266.891" y2="266.891"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="266.891" y2="326.5"/><polygon fill="#A80036" points="321 316.5 325 326.5 329 316.5 325 320.5" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="89" x2="89" y1="394.078" y2="854.436"/><line style="stroke:#a80036;stroke-width:1.5" x1="89" x2="195" y1="854.436" y2="854.436"/><polygon fill="#A80036" points="185 850.436 195 854.436 185 858.436 189 854.436" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="325" y1="824.436" y2="854.436"/><line style="stroke:#a80036;stroke-width:1.5" x1="325" x2="219" y1="854.436" y2="854.436"/><polygon fill="#A80036" points="229 850.436 219 854.436 229 858.436 225 854.436" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="207" x2="207" y1="222.891" y2="254.891"/><polygon fill="#A80036" points="203 244.891 207 254.891 211 244.891 207 248.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1.5" x1="207" x2="207" y1="866.436" y2="886.436"/><polygon fill="#A80036" points="203 876.436 207 886.436 211 876.436 207 880.436" style="stroke:#a80036;stroke-width:1"/><line style="stroke:green;stroke-width:1.5;stroke-dasharray:7,7" x1="207" x2="207" y1="921.529" y2="977.618"/><polygon fill="green" points="203 967.618 207 977.618 211 967.618 207 971.618" style="stroke:green;stroke-width:1"/><text x="211" y="943.865" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148">Then specific operations could</text><text x="217" y="957.701" fill="#000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143">be processed with the card...</text></g></svg>